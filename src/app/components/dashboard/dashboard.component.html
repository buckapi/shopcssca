<div class="page-content bg-light">
		
    <!--Banner Start-->
    <div class="dz-bnr-inr bg-secondary overlay-black-light" style="background-image:url(images/background/bg1.jpg);">
        <div class="container">
            <div class="dz-bnr-inr-entry">
                <h1>Dashboard</h1>
                <nav aria-label="breadcrumb" class="breadcrumb-row">
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a (click)="global.setRoute('home')" style="cursor: pointer;"> Inicio</a></li>
                        <li class="breadcrumb-item"><a (click)="global.setMenuOption('dashboard')" style="cursor: pointer;"> Dashboard</a></li>
                    </ul>
                </nav>
            </div>
        </div>	
    </div>
    <!--Banner End-->
    
    <div class="content-inner-1">
        <div class="container">
            <div class="row"> 
        
      
      <!-- Menú lateral -->
      <aside class="aside col-xl-3 col-lg-4 col-md-5 col-sm-12 col-xs-12" (click)="toggleMobileMenu()">
                <div class="toggle-info">
                    <h5 class="title mb-0">Menu</h5>
                    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <div class="sticky-top account-sidebar-wrapper">
                    <div class="account-sidebar" id="accountSidebar">
                        <div class="profile-head">
                            <div class="user-thumb">
                                <img class="rounded-circle" src="images/profile4.jpg" alt="Susan Gardner">
                            </div>
                            <h5 class="title mb-0">{{authService.getCurrentUser()?.username}}</h5>
                            <span class="text text-primary">info {{authService.getCurrentUser()?.email}}</span>
                        </div>
                        <div class="account-nav">
                            <div class="nav-title bg-light" [ngClass]="{active: global.menuSelected === 'dashboard'}" style="cursor:pointer;" (click)="global.setMenuOption('dashboard')">DASHBOARD</div>
                            <ul>
                                <li><a (click)="global.setMenuOption('products')" style="cursor: pointer;">Productos</a></li>
                                <li><a (click)="global.setMenuOption('add-product')" style="cursor: pointer;">Agregar Producto</a></li>
                                <li><a (click)="global.setMenuOption('orders')" style="cursor: pointer;">Ordenes</a></li>
                            </ul>
                            <div class="nav-title bg-light">Ajustes</div>
                            <ul class="account-info-list">
                                <li><a (click)="global.setMenuOption('categories')" style="cursor: pointer;">  Categorias <span>{{global.categorias.length}}</span> </a> </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </aside>
            
      <section class="col-xl-9 col-lg-8 col-md-7 col-sm-12 col-xs-12 account-wrapper">                    <div class="account-card"  [hidden]="global.menuSelected !== 'dashboard'">
                        <div class="m-b30">
                            <p>Hola, bienvenido a tu Dashboard de <strong class="text-black">CSS.CA</strong> </p>
                        </div>
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="total-contain" (click)="global.setMenuOption('products')">
                                    <div class="total-icon">
                                        <svg width="36" height="37" viewBox="0 0 36 37" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32.4473 8.03086C32.482 8.37876 32.5 8.73144 32.5 9.08829C32.5 14.919 27.7564 19.6625 21.9258 19.6625C16.0951 19.6625 11.3516 14.919 11.3516 9.08829C11.3516 8.73144 11.3695 8.37876 11.4042 8.03086H8.98055L8.05537 0.628906H0.777344V2.74375H6.18839L8.56759 21.7774H34.1868L35.8039 8.03086H32.4473Z" fill="#FFBB38"></path><path d="M9.09669 26.0074H6.06485C4.31566 26.0074 2.89258 27.4305 2.89258 29.1797C2.89258 30.9289 4.31566 32.352 6.06485 32.352H6.24672C6.12935 32.6829 6.06485 33.0386 6.06485 33.4094C6.06485 35.1586 7.48793 36.5816 9.23711 36.5816C11.4247 36.5816 12.9571 34.4091 12.2274 32.352H22.1081C21.377 34.413 22.9157 36.5816 25.0985 36.5816C26.8476 36.5816 28.2707 35.1586 28.2707 33.4094C28.2707 33.0386 28.2061 32.6829 28.0888 32.352H30.3856V30.2371H6.06485C5.48178 30.2371 5.00742 29.7628 5.00742 29.1797C5.00742 28.5966 5.48178 28.1223 6.06485 28.1223H33.4407L33.9384 23.8926H8.83233L9.09669 26.0074Z" fill="#FFBB38"></path><path d="M21.9262 17.5477C26.5907 17.5477 30.3856 13.7528 30.3856 9.08829C30.3856 4.42378 26.5907 0.628906 21.9262 0.628906C17.2616 0.628906 13.4668 4.42378 13.4668 9.08829C13.4668 13.7528 17.2617 17.5477 21.9262 17.5477ZM20.8688 5.91602H22.9836V8.6503L24.7886 10.4554L23.2932 11.9508L20.8687 9.5262V5.91602H20.8688Z" fill="#FFBB38"></path></svg>
                                    </div>
                                    <div class="total-detail">
                                        <span class="text">Total Productos</span>
                                        <h2 class="title">{{global.getProductos().length}}</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4" >
                              <div class="total-contain" (click)="global.setMenuOption('add-product')">
                                  <div class="total-icon">
                                      <svg width="36" height="37" viewBox="0 0 36 37" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M32.4473 8.03086C32.482 8.37876 32.5 8.73144 32.5 9.08829C32.5 14.919 27.7564 19.6625 21.9258 19.6625C16.0951 19.6625 11.3516 14.919 11.3516 9.08829C11.3516 8.73144 11.3695 8.37876 11.4042 8.03086H8.98055L8.05537 0.628906H0.777344V2.74375H6.18839L8.56759 21.7774H34.1868L35.8039 8.03086H32.4473Z" fill="#FFBB38"></path><path d="M9.09669 26.0074H6.06485C4.31566 26.0074 2.89258 27.4305 2.89258 29.1797C2.89258 30.9289 4.31566 32.352 6.06485 32.352H6.24672C6.12935 32.6829 6.06485 33.0386 6.06485 33.4094C6.06485 35.1586 7.48793 36.5816 9.23711 36.5816C11.4247 36.5816 12.9571 34.4091 12.2274 32.352H22.1081C21.377 34.413 22.9157 36.5816 25.0985 36.5816C26.8476 36.5816 28.2707 35.1586 28.2707 33.4094C28.2707 33.0386 28.2061 32.6829 28.0888 32.352H30.3856V30.2371H6.06485C5.48178 30.2371 5.00742 29.7628 5.00742 29.1797C5.00742 28.5966 5.48178 28.1223 6.06485 28.1223H33.4407L33.9384 23.8926H8.83233L9.09669 26.0074Z" fill="#FFBB38"></path><path d="M21.9262 17.5477C26.5907 17.5477 30.3856 13.7528 30.3856 9.08829C30.3856 4.42378 26.5907 0.628906 21.9262 0.628906C17.2616 0.628906 13.4668 4.42378 13.4668 9.08829C13.4668 13.7528 17.2617 17.5477 21.9262 17.5477ZM20.8688 5.91602H22.9836V8.6503L24.7886 10.4554L23.2932 11.9508L20.8687 9.5262V5.91602H20.8688Z" fill="#FFBB38"></path></svg>
                                  </div>
                                  <div class="total-detail">
                                      <span class="text">Agregar Productos</span>
                                      <h2 class="title">{{global.getProductos().length}}</h2>
                                  </div>
                              </div>
                          </div>
                          
                            <div class="col-md-4">
                                <div class="total-contain" (click)="global.setMenuOption('categories')">
                                    <div class="total-icon">
                                        <svg width="33" height="27" viewBox="0 0 33 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M30.2253 12.8816H29.4827L28.6701 9.36514C28.376 8.10431 27.2552 7.22168 25.9662 7.22168H21.8474V3.84528C21.8474 2.03804 20.3764 0.581055 18.5831 0.581055H3.17237C1.46313 0.581055 0.0761719 1.96801 0.0761719 3.67717V20.0967C0.0761719 21.8058 1.46313 23.1928 3.17237 23.1928H4.29313C4.89555 25.1962 6.74485 26.6533 8.93037 26.6533C11.1159 26.6533 12.9792 25.1962 13.5816 23.1928C13.8455 23.1928 20.3459 23.1928 20.1942 23.1928C20.7966 25.1962 22.6459 26.6533 24.8315 26.6533C27.031 26.6533 28.8803 25.1962 29.4827 23.1928H30.2253C31.7663 23.1928 32.9992 21.9599 32.9992 20.4189V15.6555C32.9992 14.1145 31.7663 12.8816 30.2253 12.8816ZM8.93037 23.8513C7.78968 23.8513 6.88491 22.8969 6.88491 21.7918C6.88491 20.657 7.79558 19.7324 8.93037 19.7324C10.0652 19.7324 10.9898 20.657 10.9898 21.7918C10.9898 22.9151 10.0692 23.8513 8.93037 23.8513ZM13.9739 8.06224L9.79897 11.3125C9.20227 11.7767 8.30347 11.6903 7.82363 11.0604L6.21247 8.94486C5.7361 8.32843 5.86222 7.4458 6.47866 6.98346C7.08107 6.50717 7.96369 6.63321 8.44006 7.24965L9.19656 8.23035L12.2507 5.84867C12.8531 5.3864 13.7357 5.48448 14.2121 6.10092C14.6884 6.71727 14.5763 7.58595 13.9739 8.06224ZM24.8315 23.8513C23.6906 23.8513 22.7861 22.8969 22.7861 21.7918C22.7861 20.657 23.7107 19.7324 24.8315 19.7324C25.9662 19.7324 26.8909 20.657 26.8909 21.7918C26.8909 22.9166 25.9683 23.8513 24.8315 23.8513ZM22.618 10.0236H25.2798C25.6021 10.0236 25.8962 10.2337 26.0083 10.542L26.8629 13.0497C27.031 13.5541 26.6667 14.0724 26.1344 14.0724H22.618C22.1976 14.0724 21.8474 13.7222 21.8474 13.3019V10.7942C21.8474 10.3739 22.1976 10.0236 22.618 10.0236Z" fill="#FFBB38"></path></svg>
                                    </div>
                                    <div class="total-detail">
                                        <span class="text">Total Categorias </span>
                                        <h2 class="title">{{global.getCategorias().length}}</h2>
                                    </div>
                                </div>
                            </div>
                           
                            <div class="col-xl-12">
                                <div class="card countries-card px-3 pt-3 pb-2 mb-2">
                                    <h6>Visitas</h6>
                                    <ul>
                                        <li>
                                            <div class="thumb-detail">
                                                <img src="images/country/pic1.png" alt="">
                                                <span>Pais</span>
                                            </div>
                                            <div class="thumb-content"><h6 class="amount">visitas</h6></div>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div> 
                    <div class="account-card" id="category" [hidden]="global.menuSelected !== 'categories'" >
                        <div class="table-responsive table-style-1">
                          <button class="btn btn-primary" (click)="global.setMenuOption('dashboard')"><i class="icon feather icon-arrow-left"></i> Regresar </button>
                            <button class="btn btn-primary" href="#add-category" data-bs-toggle="modal">Agregar Categoria</button>
                            <table class="table table-hover mb-3">
                                <thead>
                                    <tr>
                                        <th>Categoria</th>
                                        <th>Imagen</th>
                                        <th>Acción</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let categoria of (realtimecategorias.categorias$ | async)">
                                        <td><a class="fw-medium">{{ categoria.name }}</a></td>
                                        <td><img src="{{categoria.files[0]}}" style="width: 50px;"></td>
                                        <td><a (click)="deleteCategory(categoria.id)" data-bs-toggle="modal" class="btn-link text-underline p-0" style="cursor: pointer; color: red;"> <i class="icon feather icon-trash"></i> Eliminar</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="account-card" id="product" [hidden]="global.menuSelected !== 'add-product'">
                      <button class="btn btn-primary" (click)="global.setMenuOption('dashboard')"><i class="icon feather icon-arrow-left"></i> Regresar </button>

                        <form class="row" (ngSubmit)="onSubmit()">
                            <div class="profile-edit">
                               
                                <div class="clearfix">
                                  <!-- <h2 class="title mb-0">Imágenes</h2> -->
                                  <span class="text text-primary"></span>
                                </div>
                                <div class="clearfix">
                                  <div class="custom-file-upload">
                                    <!-- Vista previa de múltiples imágenes -->
                                    <div *ngIf="selectedImages.length > 0" class="image-previews">
                                      <div *ngFor="let image of selectedImages; let i = index" class="image-preview-item">
                                        <img [src]="image.preview" alt="Selected Image" class="img-thumbnail"
                                             style="border-radius: 10%; cursor: pointer; border: 5px solid #3ba5a8; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); transition: box-shadow 0.3s ease, transform 0.3s ease; max-width: 150px; max-height: 150px;" />
                                        <button type="button" class="btn btn-danger btn-sm remove-image" (click)="removeImage(i)">
                                          <i class="fa-solid fa-times"></i>
                                        </button>
                                      </div>
                                    </div>
                                    
                                    <!-- Input para múltiples archivos -->
                                    <input #imageUpload id="imageUpload" type="file" (change)="onImageChange($event)" class="form-control"
                                           accept="image/*" style="display: none;" multiple />
                                    <label for="imageUpload" class="btn mb-2 me-2 btn-primary">
                                      <i class="fa-solid fa-images me-2"></i>Imágenes de producto
                                    </label>
                                    <div *ngIf="selectedImages.length === 0" class="text-danger">* Por favor, suba al menos una imagen.</div>
                                  </div>
                                </div>
                                <div class="clearfix">
                                  <div class="custom-file-upload">
                                    <!-- Vista previa de videos -->
                                    <div *ngIf="selectedVideos.length > 0" class="video-previews">
                                      <div *ngFor="let video of selectedVideos; let i = index" class="video-preview-item">
                                        <video controls class="video-thumbnail">
                                          <source [src]="video.preview" [type]="video.file.type">
                                          Tu navegador no soporta videos HTML5.
                                        </video>
                                        <div class="video-info">
                                          <span>{{ video.file.name }}</span>
                                          <span>{{ (video.file.size / (1024 * 1024)).toFixed(2) }} MB</span>
                                        </div>
                                        <button type="button" class="btn btn-danger btn-sm remove-video" (click)="removeVideo(i)">
                                          <i class="fa-solid fa-trash"></i> Eliminar
                                        </button>
                                      </div>
                                    </div>
                                    
                                    <!-- Input para videos -->
                                    <input #videoUpload id="videoUpload" type="file" (change)="onVideoSelected($event)" class="form-control"
                                    accept="video/mp4,video/webm,video/ogg" style="display: none;" multiple />
                                    <label for="videoUpload" class="btn mb-2 me-2 btn-primary">
                                      <i class="fa-solid fa-video me-2"></i>Subir Videos
                                    </label>
                                    <div *ngIf="selectedVideos.length === 0" class="text-muted">Formatos soportados: MP4, WebM, Ogg</div>
                                  </div>
                                </div>
                            </div>
                            
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Nombre del producto</label>
                                    <input name="name" [(ngModel)]="product.name" required class="form-control" placeholder="Nombre del producto">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Precio</label>
                                    <input name="price" [(ngModel)]="product.price" required class="form-control" placeholder="Precio">
                                </div>
                            </div>
                           
                            <div class="col-lg-4">
                              <select name="category" [(ngModel)]="product.categorias" required class="form-control">
                                <option value="">Seleccione una categoría</option>
                                <option *ngFor="let category of (realtimecategorias.categorias$ | async)" 
                                        [value]="category.id">
                                  {{ category.name }}
                                </option>
                              </select>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-group m-b25">
                                    <label class="label-title">Cantidad</label>
                                    <input type="number" name="quantity" [(ngModel)]="product.quantity" required class="form-control" placeholder="Cantidad">
                                </div>
                            </div>
                            <div class="col-lg-3">
                              <div class="form-group m-b25">
                                  <label class="label-title">Dimensiones</label>
                                  <input type="text" name="dimensions" [(ngModel)]="product.dimensions" required class="form-control" placeholder="Dimensiones">
                              </div>
                          </div>
                          <div class="col-lg-3">
                            <div class="form-group m-b25">
                                <label class="label-title">Peso</label>
                                <input type="number" name="weight" [(ngModel)]="product.weight" required class="form-control" placeholder="Peso">
                            </div>
                          </div>
                          <div class="col-lg-3">
                            <div class="form-group m-b25">
                                <label class="label-title">Unidad de Medida</label>
                                <select name="unit" [(ngModel)]="product.unit" required class="form-control">
                                  <option value="">Seleccione una unidad</option>
                                  <option [value]="Unit.Kg">Kg</option>
                                  <option [value]="Unit.G">g</option>
                                  <option [value]="Unit.L">L</option>
                                  <option [value]="Unit.Ml">ml</option>
                                  <option [value]="Unit.Cm">cm</option>
                                  <option [value]="Unit.Mm">mm</option>
                                  <option [value]="Unit.Lb">lb</option>
                                </select>
                            </div>
                          </div>
                          <div class="col-lg-4">
                            <div class="form-group m-b25">
                                <label class="label-title">Codigo</label>
                                <input type="text" name="code" [(ngModel)]="product.code" required class="form-control" placeholder="Codigo">
                            </div>
                        </div>
                          <div class="col-lg-4">
                            <div class="form-group m-b25">
                                <label class="label-title">Marca</label>
                                <input type="text" name="manufacturer" [(ngModel)]="product.manufacturer" required class="form-control" placeholder="Marca">
                            </div>
                        </div>
                        <div class="col-lg-4">
                          <div class="form-group m-b25">
                              <label class="label-title">Pais de Origen</label>
                              <input type="text" name="country" [(ngModel)]="product.country" required class="form-control" placeholder="Pais de Origen">
                          </div>
                      </div>
                        <div class="col-lg-4">
                          <div class="form-group m-b25">
                              <label class="label-title">Material</label>
                              <input type="text" name="material" [(ngModel)]="product.material" required class="form-control" placeholder="Material">
                          </div>
                      </div>  
                      <div class="col-lg-4">
                        <div class="form-group m-b25">
                            <label class="label-title">Enlace de mercado libre</label>
                            <input type="text" name="marketplace_link" [(ngModel)]="product.marketplace_link" required class="form-control" placeholder="Enlace de mercado libre">
                        </div> 
                     </div> 
                      <div class="col-lg-12">
                        <div class="form-group m-b25">
                            <label class="label-title">Descripcion</label>
                            <textarea name="description" [(ngModel)]="product.description" required class="form-control" placeholder="Descripcion" rows="4"></textarea>
                        </div>
                    </div>
                            
                            <div class="d-flex flex-wrap justify-content-between align-items-center">
                                <button class="btn btn-success mt-3 mt-sm-0" type="submit">Guardar</button>
                                <button class="btn btn-outline-success mt-3 mt-sm-0" type="reset">Cancelar</button>
                            </div>
                        </form> 
                        
                    </div>
                    <div class="account-card" id="product" [hidden]="global.menuSelected !== 'edit-product'">
                      <button class="btn btn-primary" (click)="global.setMenuOption('dashboard')"><i class="icon feather icon-arrow-left"></i> Regresar </button>

                      <form class="row" (ngSubmit)="updateProduct()">
                        <div class="profile-edit">
                          
                          <div class="clearfix">
                            <div class="custom-file-upload">
                              <!-- Vista previa corregida (usando files consistentemente) -->
                              <div *ngIf="selectedImages.length > 0 || (productToEdit.files && productToEdit.files.length > 0)" class="image-previews">
                                <!-- Mostrar imágenes existentes -->
                                <div *ngFor="let imageUrl of productToEdit.files; let i = index" class="image-preview-item">
                                  <img [src]="imageUrl" alt="Existing Image" class="img-thumbnail"/>
                                  <button type="button" class="btn btn-danger btn-sm remove-image" (click)="removeExistingImage(i)">
                                    <i class="fa-solid fa-times"></i>
                                  </button>
                                </div>
                                
                                <!-- Mostrar imágenes nuevas seleccionadas -->
                                <div *ngFor="let image of selectedImages; let i = index" class="image-preview-item">
                                  <img [src]="image.preview" alt="Selected Image" class="img-thumbnail"/>
                                  <button type="button" class="btn btn-danger btn-sm remove-image" (click)="removeImage(i)">
                                    <i class="fa-solid fa-times"></i>
                                  </button>
                                </div>
                              </div>
                              
                              <!-- Input para múltiples archivos -->
                              <input #imageUpload id="imageUpload" type="file" (change)="onImageChange($event)" class="form-control"
                                     accept="image/*" style="display: none;" multiple />
                              <label for="imageUpload" class="btn mb-2 me-2 btn-primary">
                                <i class="fa-solid fa-images me-2"></i>Imágenes de producto
                              </label>
                              <!-- Validación corregida (usando files) -->
                              <div *ngIf="selectedImages.length === 0 && (!productToEdit.files || productToEdit.files.length === 0)" class="text-danger">
                                * Por favor, suba al menos una imagen.
                              </div>
                            </div>
                          </div>
                          
                          <div class="clearfix">
                            <div class="custom-file-upload">
                              <!-- Vista previa de videos (existentes y nuevos) -->
                              <div *ngIf="selectedVideos.length > 0 || (productToEdit.videos && productToEdit.videos.length > 0)" class="video-previews">
                                <!-- Mostrar videos existentes -->
                                <div *ngFor="let videoUrl of productToEdit.videos; let i = index" class="video-preview-item">
                                  <video controls class="video-thumbnail">
                                    <source [src]="videoUrl" type="video/mp4">
                                    Tu navegador no soporta videos HTML5.
                                  </video>
                                  <div class="video-info">
                                    <span>Video existente {{i + 1}}</span>
                                  </div>
                                  <button type="button" class="btn btn-danger btn-sm remove-video" (click)="removeExistingVideo(i)">
                                    <i class="fa-solid fa-trash"></i> Eliminar
                                  </button>
                                </div>
                                
                                <!-- Mostrar videos nuevos seleccionados -->
                                <div *ngFor="let video of selectedVideos; let i = index" class="video-preview-item">
                                  <video controls class="video-thumbnail">
                                    <source [src]="video.preview" [type]="video.file.type">
                                    Tu navegador no soporta videos HTML5.
                                  </video>
                                  <div class="video-info">
                                    <span>{{ video.file.name }}</span>
                                    <span>{{ (video.file.size / (1024 * 1024)).toFixed(2) }} MB</span>
                                  </div>
                                  <button type="button" class="btn btn-danger btn-sm remove-video" (click)="removeVideo(i)">
                                    <i class="fa-solid fa-trash"></i> Eliminar
                                  </button>
                                </div>
                              </div>
                              
                              <!-- Input para videos -->
                              <input #videoUpload id="videoUpload" type="file" (change)="onVideoSelected($event)" class="form-control"
                              accept="video/mp4,video/webm,video/ogg" style="display: none;" multiple />
                              <label for="videoUpload" class="btn mb-2 me-2 btn-primary">
                                <i class="fa-solid fa-video me-2"></i>Subir Videos
                              </label>
                              <div *ngIf="selectedVideos.length === 0 && (!productToEdit.videos || productToEdit.videos.length === 0)" class="text-muted">Formatos soportados: MP4, WebM, Ogg</div>
                            </div>
                          </div>
                        </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Nombre del producto</label>
                                    <input name="name" [(ngModel)]="productToEdit.name" required class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Precio</label>
                                    <input name="price" [(ngModel)]="productToEdit.price" required class="form-control" placeholder="Precio">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Categoria</label>
                                    <select name="category" [(ngModel)]="productToEdit.categories" required class="form-control" placeholder="Categoria">
                                        <option *ngFor="let category of (realtimecategorias.categorias$ | async)" [value]="category.id">{{ category.name }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Cantidad</label>
                                    <input type="number" name="quantity" [(ngModel)]="productToEdit.quantity" required class="form-control" placeholder="Cantidad">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Dimensiones</label>
                                    <input type="text" name="dimensions" [(ngModel)]="productToEdit.dimensions" required class="form-control" placeholder="Dimensiones">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Peso</label>
                                    <input type="number" name="weight" [(ngModel)]="productToEdit.weight" required class="form-control" placeholder="Peso">
                                </div>
                            </div>
                            <div class="col-lg-3">
                              <div class="form-group m-b25">
                                  <label class="label-title">Unidad de Medida</label>
                                  <select name="unit" [(ngModel)]="productToEdit.unit" required class="form-control">
                                    <option value="">Seleccione una unidad</option>
                                    <option [value]="Unit.Kg">Kg</option>
                                    <option [value]="Unit.G">g</option>
                                    <option [value]="Unit.L">L</option>
                                    <option [value]="Unit.Ml">ml</option>
                                    <option [value]="Unit.Cm">cm</option>
                                    <option [value]="Unit.Mm">mm</option>
                                    <option [value]="Unit.Lb">lb</option>
                                  </select>
                              </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Codigo</label>
                                    <input type="text" name="code" [(ngModel)]="productToEdit.code" required class="form-control" placeholder="Codigo">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Fabricante</label>
                                    <input type="text" name="manufacturer" [(ngModel)]="productToEdit.manufacturer" required class="form-control" placeholder="Fabricante">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Pais de Origen</label>
                                    <input type="text" name="country" [(ngModel)]="productToEdit.country" required class="form-control" placeholder="Pais de Origen">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group m-b25">
                                    <label class="label-title">Material</label>
                                    <input type="text" name="material" [(ngModel)]="productToEdit.material" required class="form-control" placeholder="Material">
                                </div>
                            </div>
                            <div class="col-lg-4">
                              <div class="form-group m-b25">
                                  <label class="label-title">Enlace de mercado libre</label>
                                  <input type="text" name="marketplace_link" [(ngModel)]="productToEdit.marketplace_link" required class="form-control" placeholder="Enlace de mercado libre">
                              </div> 
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group m-b25">
                                    <label class="label-title">Descripcion</label>
                                    <textarea name="description" [(ngModel)]="productToEdit.description" required class="form-control" placeholder="Descripcion" rows="4"></textarea>
                                </div>
                            </div>
                    
                            <div class="d-flex flex-wrap justify-content-between align-items-center">
                                <button class="btn btn-success mt-3 mt-sm-0" type="submit">Guardar</button>
                                <button class="btn btn-outline-success mt-3 mt-sm-0" type="reset" (click)="cancelEdit()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-xl-9 account-wrapper" [hidden]="global.menuSelected !== 'products'">
                      <button class="btn btn-primary" (click)="global.setMenuOption('dashboard')"><i class="icon feather icon-arrow-left"></i> Regresar </button>
                      <div class="account-card">
                        <div class="table-responsive table-style-1">
                          <table class="table table-hover mb-3">
                            <thead>
                              <tr>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Cantidad</th>
                                <th>Acción</th>
                              </tr>
                            </thead>
                            <tbody *ngFor="let producto of global.getProductos()">
                              <tr>
                                <td><a (click)="global.previaProducto = producto" class="fw-medium" style="cursor: pointer;" (click)="global.setRoute('product-details')">{{producto.name}}</a></td>
                                <td>{{producto.price}}</td>
                                <td>{{producto.quantity}}</td>
                                <td>
                                  <a (click)="global.editProduct(producto)" style="cursor: pointer; color: blue;"><i class="icon feather icon-edit"></i> Editar</a> <br>
                                  <a (click)="deleteProduct(producto.id)" style="cursor: pointer; color: red;"><i class="icon feather icon-trash"></i> Eliminar</a></td>
                                </tr>
                            </tbody>
                          </table>
                        </div>
                        
                        <!-- Pagination-->
                        <!-- <div class="d-flex justify-content-center">
                          <nav aria-label="Table Pagination">
                            <ul class="pagination style-1">
                              <li class="page-item"><a class="page-link" href="javascript:void(0);">Prew</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0);">1</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0);">3</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0);">Next</a></li>
                            </ul>
                          </nav>
                        </div> -->
                                  </div>
                    </div>
                </section>
                <div class="modal quick-view-modal fade" id="add-category" tabindex="-1" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered modal-lg"> 
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">Agregar Categoría</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                          <i class="icon feather icon-x"></i>
                        </button>
                      </div>
                      <div class="modal-body p-4"> 
                        <form class="row g-3" (ngSubmit)="addCategory()"> 
                          <div class="col-12">
                            <div class="border rounded p-3 mb-3"> 
                              <div class="custom-file-upload">
                                <div *ngIf="selectedImages.length > 0" class="d-flex flex-wrap gap-3 mb-3">
                                  <div *ngFor="let image of selectedImages; let i = index" class="position-relative" style="width: 120px;">
                                    <img [src]="image.preview" alt="Selected Image" 
                                         class="img-thumbnail rounded-circle"
                                         style="width: 100%; height: 120px; object-fit: cover; border: 3px solid #3ba5a8;">
                                    <button type="button" class="btn btn-danger btn-sm position-absolute top-0 end-0 p-1" 
                                            (click)="removeImage(i)" style="transform: translate(30%, -30%);">
                                      <i class="fa-solid fa-times"></i>
                                    </button>
                                  </div>
                                </div>
                                
                                <div class="d-flex flex-column">
                                  <input #imageUpload id="imageUpload" type="file" 
                                         (change)="onImageChange($event)" class="form-control"
                                         accept="image/*" style="display: none;" multiple />
                                  <label for="imageUpload" class="btn btn-primary align-self-start">
                                    <i class="fa-solid fa-images me-2"></i>Imagen de la categoría
                                  </label>
                                  <small *ngIf="selectedImages.length === 0" class="text-danger mt-1">
                                    * Por favor, suba al menos una imagen.
                                  </small>
                                </div>
                              </div>
                            </div>
                          </div>
                          
                              <div class="col-md-12">
                            <div class="form-group mb-3">
                              <label class="form-label fw-bold">Nombre de la categoría</label>
                              <input name="name" [(ngModel)]="categoria.name" required 
                                     class="form-control" placeholder="Nombre de la categoría">
                            </div>
                          </div>
                          
                          <div class="col-12 d-flex justify-content-end gap-2 mt-3">
                            <button class="btn btn-outline-secondary" type="button" data-bs-dismiss="modal">
                              Cancelar
                            </button>
                            <button class="btn btn-success" type="button" (click)="addCategory()">
                              Guardar
                            </button>
                          </div>
                          
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
    </div>
</div>
